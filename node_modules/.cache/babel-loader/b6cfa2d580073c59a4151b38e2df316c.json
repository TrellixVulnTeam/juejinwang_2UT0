{"ast":null,"code":"export default {\n  name: 'Mulu',\n\n  data() {\n    return {\n      buttonArr: [\"核心优势\", \"应用场景\", \"使用流程\"],\n      activeMenu: 0,\n      contentStyleObj: {\n        height: '100px'\n      }\n    };\n  },\n\n  jump(index) {\n    let target = document.querySelector('.scroll-content');\n    let scrollItems = document.querySelectorAll('.scroll-item'); // 判断滚动条是否滚动到底部\n\n    if (target.scrollHeight <= target.scrollTop + target.clientHeight) {\n      this.activeMenu = index;\n    }\n\n    let totalY = scrollItems[index].offsetTop - scrollItems[0].offsetTop; // 锚点元素距离其offsetParent(这里是body)顶部的距离(待滚动的距离)\n\n    let distance = document.querySelector('.scroll-content').scrollTop; // 滚动条距离滚动区域顶部的距离\n    // let distance = document.body.scrollTop || document.documentElement.scrollTop || window.pageYOffset // 滚动条距离滚动区域顶部的距离(滚动区域为窗口)\n    // 滚动动画实现, 使用setTimeout的递归实现平滑滚动，将距离细分为50小段，10ms滚动一次\n    // 计算每一小段的距离\n\n    let step = totalY / 50;\n\n    if (totalY > distance) {\n      smoothDown(document.querySelector('.scroll-content'));\n    } else {\n      let newTotal = distance - totalY;\n      step = newTotal / 50;\n      smoothUp(document.querySelector('.scroll-content'));\n    } // 参数element为滚动区域\n\n\n    function smoothDown(element) {\n      if (distance < totalY) {\n        distance += step;\n        element.scrollTop = distance;\n        setTimeout(smoothDown.bind(this, element), 10);\n      } else {\n        element.scrollTop = totalY;\n      }\n    } // 参数element为滚动区域\n\n\n    function smoothUp(element) {\n      if (distance > totalY) {\n        distance -= step;\n        element.scrollTop = distance;\n        setTimeout(smoothUp.bind(this, element), 10);\n      } else {\n        element.scrollTop = totalY;\n      }\n    }\n  },\n\n  // 滚动条滚动\n  onScroll(e) {\n    let scrollItems = document.querySelectorAll('.scroll-item');\n\n    for (let i = scrollItems.length - 1; i >= 0; i--) {\n      // 判断滚动条滚动距离是否大于当前滚动项可滚动距离\n      let judge = e.target.scrollTop >= scrollItems[i].offsetTop - scrollItems[0].offsetTop - 400;\n\n      if (judge) {\n        this.activeMenu = i;\n        break;\n      }\n    }\n\n    if (e.target.scrollTop === 0) {\n      this.activeMenu = 0;\n    }\n  },\n\n  getHight() {\n    this.contentStyleObj.height = window.innerHeight - 190 + 'px';\n  }\n\n};","map":{"version":3,"mappings":"AAUA;EACAA,YADA;;EAEAC;IACA;MACAC,mCADA;MAEAC,aAFA;MAGAC;QACAC;MADA;IAHA;EAOA,CAVA;;EAWAC;IACA;IACA,4DAFA,CAGA;;IACA;MACA;IACA;;IACA,qEAPA,CAOA;;IACA,mEARA,CAQA;IACA;IACA;IACA;;IACA;;IACA;MACAC;IACA,CAFA,MAEA;MACA;MACAC;MACAC;IACA,CAnBA,CAqBA;;;IACA;MACA;QACAC;QACAC;QACAC;MACA,CAJA,MAIA;QACAD;MACA;IACA,CA9BA,CAgCA;;;IACA;MACA;QACAD;QACAC;QACAC;MACA,CAJA,MAIA;QACAD;MACA;IACA;EACA,CArDA;;EAsDA;EACAE;IACA;;IACA;MACA;MACA;;MACA;QACA;QACA;MACA;IAEA;;IACA;MACA;IACA;EAEA,CAtEA;;EAuEAC;IACA;EACA;;AAzEA","names":["name","data","buttonArr","activeMenu","contentStyleObj","height","jump","smoothDown","step","smoothUp","distance","element","setTimeout","onScroll","getHight"],"sourceRoot":"src/components","sources":["Mulu.vue"],"sourcesContent":["<template>\r\n  <div class=\"tab\">\r\n    <a :class=\"activeMenu === index?'active':''\" v-for=\"(item,index) in buttonArr\" :key='index' @click=\"jump(index)\">{{item}}</a>\r\n    <div class=\"scroll-content\" :style=\"'overflow-x: hidden; overflow-y: auto;height:' + contentStyleObj.height\" @scroll=\"onScroll\">我是内容</div>\r\n</div>\r\n\r\n                                \r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:'Mulu',\r\n    data(){\r\n    return{\r\n        buttonArr: [\"核心优势\", \"应用场景\", \"使用流程\"],\r\n        activeMenu: 0,\r\n        contentStyleObj: {\r\n            height: '100px'\r\n        },\r\n   }\r\n},\r\njump(index) {\r\n        let target = document.querySelector('.scroll-content')\r\n        let scrollItems = document.querySelectorAll('.scroll-item')\r\n        // 判断滚动条是否滚动到底部\r\n        if (target.scrollHeight <= target.scrollTop + target.clientHeight) {\r\n          this.activeMenu = index\r\n        }\r\n        let totalY = scrollItems[index].offsetTop - scrollItems[0].offsetTop // 锚点元素距离其offsetParent(这里是body)顶部的距离(待滚动的距离)\r\n        let distance = document.querySelector('.scroll-content').scrollTop // 滚动条距离滚动区域顶部的距离\r\n        // let distance = document.body.scrollTop || document.documentElement.scrollTop || window.pageYOffset // 滚动条距离滚动区域顶部的距离(滚动区域为窗口)\r\n        // 滚动动画实现, 使用setTimeout的递归实现平滑滚动，将距离细分为50小段，10ms滚动一次\r\n        // 计算每一小段的距离\r\n        let step = totalY / 50\r\n        if (totalY > distance) {\r\n          smoothDown(document.querySelector('.scroll-content'))\r\n        } else {\r\n          let newTotal = distance - totalY\r\n          step = newTotal / 50\r\n          smoothUp(document.querySelector('.scroll-content'))\r\n        }\r\n \r\n        // 参数element为滚动区域\r\n        function smoothDown(element) {\r\n          if (distance < totalY) {\r\n            distance += step\r\n            element.scrollTop = distance\r\n            setTimeout(smoothDown.bind(this, element), 10)\r\n          } else {\r\n            element.scrollTop = totalY\r\n          }\r\n        }\r\n \r\n        // 参数element为滚动区域\r\n        function smoothUp(element) {\r\n          if (distance > totalY) {\r\n            distance -= step\r\n            element.scrollTop = distance\r\n            setTimeout(smoothUp.bind(this, element), 10)\r\n          } else {\r\n            element.scrollTop = totalY\r\n          }\r\n        }\r\n      },\r\n// 滚动条滚动\r\n      onScroll(e) {\r\n        let scrollItems = document.querySelectorAll('.scroll-item')\r\n        for (let i = scrollItems.length - 1; i >= 0; i--) {\r\n          // 判断滚动条滚动距离是否大于当前滚动项可滚动距离\r\n          let judge = e.target.scrollTop >= scrollItems[i].offsetTop - scrollItems[0].offsetTop - 400;\r\n          if (judge) {\r\n            this.activeMenu = i\r\n            break\r\n          }\r\n          \r\n        }\r\n        if(e.target.scrollTop===0){\r\n              this.activeMenu = 0\r\n          }\r\n        \r\n      },\r\n      getHight() {\r\n        this.contentStyleObj.height = (window.innerHeight - 190) + 'px'\r\n      }\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}